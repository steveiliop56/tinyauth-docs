import{j as e}from"./index-BDrdAJGi.js";const a="/assets/github-app-new-BT7G4dzS.png",r="/assets/github-app-email-B6VqSQGP.png",h="/assets/github-app-home-Dg1gwLuu.png",o="/assets/github-app-client-secret-BDqk_EQG.png";let d={title:"GitHub Apps OAuth",description:"Use the GitHub Apps OAuth screen for authenticating to Tinyauth."},p=[{href:"/docs/guides/github-oauth.md"},{href:"https://github.com/settings/apps"},{href:"/docs/reference/configuration"}],u={contents:[{heading:void 0,content:"Tinyauth also supports GitHub Apps for authentication instead of OAuth Apps. GitHub Apps allow more control over permissions and are slightly more complex to set up. For simpler setups, the OAuth Apps guide is recommended."},{heading:"requirements",content:"GitHub requires the following to set up an app:"},{heading:"requirements",content:"A domain name (non-gTLDs are supported)"},{heading:"requirements",content:"A GitHub account"},{heading:"creating-the-github-app",content:"Open the GitHub Apps site and click New GitHub App. The following screen will appear:"},{heading:"creating-the-github-app",content:"Fill in the following information:"},{heading:"creating-the-github-app",content:"Name"},{heading:"creating-the-github-app",content:"Value"},{heading:"creating-the-github-app",content:"GitHub App Name"},{heading:"creating-the-github-app",content:"The name for the app, e.g., Tinyauth."},{heading:"creating-the-github-app",content:"Homepage URL"},{heading:"creating-the-github-app",content:"Any URL, e.g., https://tinyauth.app."},{heading:"creating-the-github-app",content:"Callback URL"},{heading:"creating-the-github-app",content:"The Tinyauth app URL followed by /api/oauth/callback/github, e.g., https://tinyauth.example.com/api/oauth/callback/github."},{heading:"creating-the-github-app",content:"Under webhook, ensure the Active checkbox is unchecked as webhooks are not required."},{heading:"creating-the-github-app",content:"In the Permissions section, click Account permissions and set the Email Addresses option to Read-only:"},{heading:"creating-the-github-app",content:"Create the app. The following screen will appear:"},{heading:"creating-the-github-app",content:"Note the client ID. To generate the client secret, click Generate new client secret. After authentication, the secret will appear:"},{heading:"creating-the-github-app",content:"Note down the client ID and secret as they will be required for Tinyauth."},{heading:"configuring-tinyauth",content:"Add the following environment variables to the Tinyauth Docker container:"},{heading:"configuring-tinyauth",content:"type: warning"},{heading:"configuring-tinyauth",content:`OAuth alone does not guarantee security. By default, any GitHub account can
log in as a normal user. To restrict access, use the OAUTH_WHITELIST
environment variable to allow specific email addresses. Refer to the
configuration page for details.`},{heading:"configuring-tinyauth",content:"type: tip"},{heading:"configuring-tinyauth",content:`With OAuth enabled, the USERS or USERS_FILE environment variables can be
removed to allow login exclusively through the OAuth provider.`},{heading:"configuring-tinyauth",content:"Restart Tinyauth. Upon visiting the login screen, an additional option to log in with GitHub will appear."}],headings:[{id:"requirements",content:"Requirements"},{id:"creating-the-github-app",content:"Creating the GitHub App"},{id:"configuring-tinyauth",content:"Configuring Tinyauth"}]};const g=[{depth:2,url:"#requirements",title:e.jsx(e.Fragment,{children:"Requirements"})},{depth:2,url:"#creating-the-github-app",title:e.jsx(e.Fragment,{children:"Creating the GitHub App"})},{depth:2,url:"#configuring-tinyauth",title:e.jsx(e.Fragment,{children:"Configuring Tinyauth"})}];function s(n){const t={a:"a",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...n.components},{Callout:i}=t;return i||c("Callout"),e.jsxs(e.Fragment,{children:[e.jsxs(t.p,{children:["Tinyauth also supports GitHub Apps for authentication instead of OAuth Apps. GitHub Apps allow more control over permissions and are slightly more complex to set up. For simpler setups, the ",e.jsx(t.a,{href:"/docs/guides/github-oauth.md",children:"OAuth Apps"})," guide is recommended."]}),`
`,e.jsx(t.h2,{id:"requirements",children:"Requirements"}),`
`,e.jsx(t.p,{children:"GitHub requires the following to set up an app:"}),`
`,e.jsxs(t.ul,{children:[`
`,e.jsx(t.li,{children:"A domain name (non-gTLDs are supported)"}),`
`,e.jsx(t.li,{children:"A GitHub account"}),`
`]}),`
`,e.jsx(t.h2,{id:"creating-the-github-app",children:"Creating the GitHub App"}),`
`,e.jsxs(t.p,{children:["Open the ",e.jsx(t.a,{href:"https://github.com/settings/apps",children:"GitHub Apps"})," site and click ",e.jsx(t.strong,{children:"New GitHub App"}),". The following screen will appear:"]}),`
`,e.jsx(t.p,{children:e.jsx(t.img,{alt:"GitHub New App Screen",src:a,placeholder:"blur"})}),`
`,e.jsx(t.p,{children:"Fill in the following information:"}),`
`,e.jsxs(t.table,{children:[e.jsx(t.thead,{children:e.jsxs(t.tr,{children:[e.jsx(t.th,{children:"Name"}),e.jsx(t.th,{children:"Value"})]})}),e.jsxs(t.tbody,{children:[e.jsxs(t.tr,{children:[e.jsx(t.td,{children:"GitHub App Name"}),e.jsxs(t.td,{children:["The name for the app, e.g., ",e.jsx(t.code,{children:"Tinyauth"}),"."]})]}),e.jsxs(t.tr,{children:[e.jsx(t.td,{children:"Homepage URL"}),e.jsxs(t.td,{children:["Any URL, e.g., ",e.jsx(t.code,{children:"https://tinyauth.app"}),"."]})]}),e.jsxs(t.tr,{children:[e.jsx(t.td,{children:"Callback URL"}),e.jsxs(t.td,{children:["The Tinyauth app URL followed by ",e.jsx(t.code,{children:"/api/oauth/callback/github"}),", e.g., ",e.jsx(t.code,{children:"https://tinyauth.example.com/api/oauth/callback/github"}),"."]})]})]})]}),`
`,e.jsxs(t.p,{children:["Under webhook, ensure the ",e.jsx(t.strong,{children:"Active"})," checkbox is unchecked as webhooks are not required."]}),`
`,e.jsxs(t.p,{children:["In the ",e.jsx(t.strong,{children:"Permissions"})," section, click ",e.jsx(t.strong,{children:"Account permissions"})," and set the ",e.jsx(t.strong,{children:"Email Addresses"})," option to ",e.jsx(t.strong,{children:"Read-only"}),":"]}),`
`,e.jsx(t.p,{children:e.jsx(t.img,{alt:"GitHub Emails Section",src:r,placeholder:"blur"})}),`
`,e.jsx(t.p,{children:"Create the app. The following screen will appear:"}),`
`,e.jsx(t.p,{children:e.jsx(t.img,{alt:"GitHub App Home",src:h,placeholder:"blur"})}),`
`,e.jsxs(t.p,{children:["Note the client ID. To generate the client secret, click ",e.jsx(t.strong,{children:"Generate new client secret"}),". After authentication, the secret will appear:"]}),`
`,e.jsx(t.p,{children:e.jsx(t.img,{alt:"GitHub Client Secret",src:o,placeholder:"blur"})}),`
`,e.jsx(t.p,{children:"Note down the client ID and secret as they will be required for Tinyauth."}),`
`,e.jsx(t.h2,{id:"configuring-tinyauth",children:"Configuring Tinyauth"}),`
`,e.jsx(t.p,{children:"Add the following environment variables to the Tinyauth Docker container:"}),`
`,e.jsx(e.Fragment,{children:e.jsx(t.pre,{className:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabIndex:"0",icon:'<svg viewBox="0 0 24 24"><path d="M 6,1 C 4.354992,1 3,2.354992 3,4 v 16 c 0,1.645008 1.354992,3 3,3 h 12 c 1.645008,0 3,-1.354992 3,-3 V 8 7 A 1.0001,1.0001 0 0 0 20.707031,6.2929687 l -5,-5 A 1.0001,1.0001 0 0 0 15,1 h -1 z m 0,2 h 7 v 3 c 0,1.645008 1.354992,3 3,3 h 3 v 11 c 0,0.564129 -0.435871,1 -1,1 H 6 C 5.4358712,21 5,20.564129 5,20 V 4 C 5,3.4358712 5.4358712,3 6,3 Z M 15,3.4140625 18.585937,7 H 16 C 15.435871,7 15,6.5641288 15,6 Z" fill="currentColor" /></svg>',children:e.jsxs(t.code,{children:[e.jsxs(t.span,{className:"line",children:[e.jsx(t.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"services"}),e.jsx(t.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),`
`,e.jsxs(t.span,{className:"line",children:[e.jsx(t.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"  tinyauth"}),e.jsx(t.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),`
`,e.jsxs(t.span,{className:"line",children:[e.jsx(t.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"    environment"}),e.jsx(t.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),`
`,e.jsxs(t.span,{className:"line",children:[e.jsx(t.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"      - "}),e.jsx(t.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"PROVIDERS_GITHUB_CLIENT_ID=your-github-client-id"})]}),`
`,e.jsxs(t.span,{className:"line",children:[e.jsx(t.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"      - "}),e.jsx(t.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"PROVIDERS_GITHUB_CLIENT_SECRET=your-github-secret"})]})]})})}),`
`,e.jsx(i,{type:"warning",children:e.jsxs(t.p,{children:[`OAuth alone does not guarantee security. By default, any GitHub account can
log in as a normal user. To restrict access, use the `,e.jsx(t.code,{children:"OAUTH_WHITELIST"}),`
environment variable to allow specific email addresses. Refer to the
`,e.jsx(t.a,{href:"/docs/reference/configuration",children:"configuration"})," page for details."]})}),`
`,e.jsx(i,{type:"tip",children:e.jsxs(t.p,{children:["With OAuth enabled, the ",e.jsx(t.code,{children:"USERS"})," or ",e.jsx(t.code,{children:"USERS_FILE"}),` environment variables can be
removed to allow login exclusively through the OAuth provider.`]})}),`
`,e.jsx(t.p,{children:"Restart Tinyauth. Upon visiting the login screen, an additional option to log in with GitHub will appear."})]})}function m(n={}){const{wrapper:t}=n.components||{};return t?e.jsx(t,{...n,children:e.jsx(s,{...n})}):s(n)}function c(n,t){throw new Error("Expected component `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}export{m as default,p as extractedReferences,d as frontmatter,u as structuredData,g as toc};
