import{j as e}from"./index-BDrdAJGi.js";const s="/assets/zitadel-configuration-view-OCFfCoJT.png",h="/assets/zitadel-redirect-view-CF9GNubb.png";let d={title:"Zitadel",description:"Learn how to set up Tinyauth with the Zitadel OAuth provider."},c=[{href:"https://github.com/WilliamB78"},{href:"/docs/reference/configuration"}],o={contents:[{heading:void 0,content:"Contributor: @WilliamB78."},{heading:void 0,content:"Tinyauth has built-in support for any generic OAuth provider. This guide demonstrates how to use Zitadel to authenticate users."},{heading:"requirements",content:"A domain name (gTLD required)"},{heading:"requirements",content:"A Zitadel instance (cloud or self-hosted)"},{heading:"creating-the-zitadel-oauth-app",content:"Begin by creating an app in Zitadel. Visit the Zitadel Console and create a new project. For the app, use Tinyauth."},{heading:"creating-the-zitadel-oauth-app",content:"Create a new application by clicking the + button. Follow the wizard and configure the app as follows:"},{heading:"creating-the-zitadel-oauth-app",content:"Name"},{heading:"creating-the-zitadel-oauth-app",content:"Value"},{heading:"creating-the-zitadel-oauth-app",content:"Name"},{heading:"creating-the-zitadel-oauth-app",content:"Tinyauth"},{heading:"creating-the-zitadel-oauth-app",content:"Type"},{heading:"creating-the-zitadel-oauth-app",content:"Web"},{heading:"creating-the-zitadel-oauth-app",content:"Authentication Method"},{heading:"creating-the-zitadel-oauth-app",content:"Code"},{heading:"creating-the-zitadel-oauth-app",content:"Redirect URI"},{heading:"creating-the-zitadel-oauth-app",content:"https://tinyauth.example.com/api/oauth/callback/generic"},{heading:"creating-the-zitadel-oauth-app",content:"Finalize by clicking the Create button. Copy the client ID and client secret."},{heading:"creating-the-zitadel-oauth-app",content:"After the application is created, the following screens will appear:"},{heading:"configuring-tinyauth",content:"To integrate Zitadel with Tinyauth, add the following environment variables to the Tinyauth Docker container:"},{heading:"configuring-tinyauth",content:"type: warning"},{heading:"configuring-tinyauth",content:`OAuth alone does not guarantee security. By default, any Zitadel account can
log in as a normal user. To restrict access, use the OAUTH_WHITELIST
environment variable to allow specific email addresses. Refer to the
configuration page for details.`},{heading:"configuring-tinyauth",content:"type: tip"},{heading:"configuring-tinyauth",content:`With OAuth enabled, the USERS or USERS_FILE environment variables can be
removed to allow login exclusively through the OAuth provider.`},{heading:"configuring-tinyauth",content:"Restart Tinyauth. Upon visiting the login screen, an additional option to log in with Zitadel will appear."}],headings:[{id:"requirements",content:"Requirements"},{id:"creating-the-zitadel-oauth-app",content:"Creating the Zitadel OAuth App"},{id:"configuring-tinyauth",content:"Configuring Tinyauth"}]};const p=[{depth:2,url:"#requirements",title:e.jsx(e.Fragment,{children:"Requirements"})},{depth:2,url:"#creating-the-zitadel-oauth-app",title:e.jsx(e.Fragment,{children:"Creating the Zitadel OAuth App"})},{depth:2,url:"#configuring-tinyauth",title:e.jsx(e.Fragment,{children:"Configuring Tinyauth"})}];function a(t){const i={a:"a",code:"code",em:"em",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...t.components},{Callout:n}=i;return n||r("Callout"),e.jsxs(e.Fragment,{children:[e.jsx(i.p,{children:e.jsxs(i.em,{children:["Contributor: ",e.jsx(i.a,{href:"https://github.com/WilliamB78",children:"@WilliamB78"}),"."]})}),`
`,e.jsx(i.p,{children:"Tinyauth has built-in support for any generic OAuth provider. This guide demonstrates how to use Zitadel to authenticate users."}),`
`,e.jsx(i.h2,{id:"requirements",children:"Requirements"}),`
`,e.jsxs(i.ul,{children:[`
`,e.jsx(i.li,{children:"A domain name (gTLD required)"}),`
`,e.jsx(i.li,{children:"A Zitadel instance (cloud or self-hosted)"}),`
`]}),`
`,e.jsx(i.h2,{id:"creating-the-zitadel-oauth-app",children:"Creating the Zitadel OAuth App"}),`
`,e.jsxs(i.p,{children:["Begin by creating an app in Zitadel. Visit the Zitadel Console and create a new project. For the app, use ",e.jsx(i.code,{children:"Tinyauth"}),"."]}),`
`,e.jsxs(i.p,{children:["Create a new application by clicking the ",e.jsx(i.strong,{children:"+"})," button. Follow the wizard and configure the app as follows:"]}),`
`,e.jsxs(i.table,{children:[e.jsx(i.thead,{children:e.jsxs(i.tr,{children:[e.jsx(i.th,{children:"Name"}),e.jsx(i.th,{children:"Value"})]})}),e.jsxs(i.tbody,{children:[e.jsxs(i.tr,{children:[e.jsx(i.td,{children:"Name"}),e.jsx(i.td,{children:"Tinyauth"})]}),e.jsxs(i.tr,{children:[e.jsx(i.td,{children:"Type"}),e.jsx(i.td,{children:"Web"})]}),e.jsxs(i.tr,{children:[e.jsx(i.td,{children:"Authentication Method"}),e.jsx(i.td,{children:"Code"})]}),e.jsxs(i.tr,{children:[e.jsx(i.td,{children:"Redirect URI"}),e.jsx(i.td,{children:e.jsx(i.code,{children:"https://tinyauth.example.com/api/oauth/callback/generic"})})]})]})]}),`
`,e.jsxs(i.p,{children:["Finalize by clicking the ",e.jsx(i.strong,{children:"Create"})," button. Copy the client ID and client secret."]}),`
`,e.jsx(i.p,{children:"After the application is created, the following screens will appear:"}),`
`,e.jsx(i.p,{children:e.jsx(i.img,{alt:"Zitadel configuration view",src:s,placeholder:"blur"})}),`
`,e.jsx(i.p,{children:e.jsx(i.img,{alt:"Zitadel redirect view",src:h,placeholder:"blur"})}),`
`,e.jsx(i.h2,{id:"configuring-tinyauth",children:"Configuring Tinyauth"}),`
`,e.jsx(i.p,{children:"To integrate Zitadel with Tinyauth, add the following environment variables to the Tinyauth Docker container:"}),`
`,e.jsx(e.Fragment,{children:e.jsx(i.pre,{className:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabIndex:"0",icon:'<svg viewBox="0 0 24 24"><path d="M 6,1 C 4.354992,1 3,2.354992 3,4 v 16 c 0,1.645008 1.354992,3 3,3 h 12 c 1.645008,0 3,-1.354992 3,-3 V 8 7 A 1.0001,1.0001 0 0 0 20.707031,6.2929687 l -5,-5 A 1.0001,1.0001 0 0 0 15,1 h -1 z m 0,2 h 7 v 3 c 0,1.645008 1.354992,3 3,3 h 3 v 11 c 0,0.564129 -0.435871,1 -1,1 H 6 C 5.4358712,21 5,20.564129 5,20 V 4 C 5,3.4358712 5.4358712,3 6,3 Z M 15,3.4140625 18.585937,7 H 16 C 15.435871,7 15,6.5641288 15,6 Z" fill="currentColor" /></svg>',children:e.jsxs(i.code,{children:[e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"services"}),e.jsx(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"  tinyauth"}),e.jsx(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"    environment"}),e.jsx(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"      - "}),e.jsx(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"PROVIDERS_ZITADEL_SCOPES=openid profile email preferred_username groups"})]}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"      - "}),e.jsx(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"PROVIDERS_ZITADEL_AUTH_URL=https://zitadel.example.com/oauth/v2/authorize"})]}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"      - "}),e.jsx(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"PROVIDERS_ZITADEL_TOKEN_URL=https://zitadel.example.com/oauth/v2/token"})]}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"      - "}),e.jsx(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"PROVIDERS_ZITADEL_USER_INFO_URL=https://zitadel.example.com/oidc/v1/userinfo"})]}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"      - "}),e.jsx(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"PROVIDERS_ZITADEL_CLIENT_ID=your-zitadel-client-id"})]}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"      - "}),e.jsx(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"PROVIDERS_ZITADEL_CLIENT_SECRET=your-zitadel-client-secret"})]}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"      - "}),e.jsx(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"PROVIDERS_ZITADEL_NAME=Zitadel"})]})]})})}),`
`,e.jsx(n,{type:"warning",children:e.jsxs(i.p,{children:[`OAuth alone does not guarantee security. By default, any Zitadel account can
log in as a normal user. To restrict access, use the `,e.jsx(i.code,{children:"OAUTH_WHITELIST"}),`
environment variable to allow specific email addresses. Refer to the
`,e.jsx(i.a,{href:"/docs/reference/configuration",children:"configuration"})," page for details."]})}),`
`,e.jsx(n,{type:"tip",children:e.jsxs(i.p,{children:["With OAuth enabled, the ",e.jsx(i.code,{children:"USERS"})," or ",e.jsx(i.code,{children:"USERS_FILE"}),` environment variables can be
removed to allow login exclusively through the OAuth provider.`]})}),`
`,e.jsx(i.p,{children:"Restart Tinyauth. Upon visiting the login screen, an additional option to log in with Zitadel will appear."})]})}function u(t={}){const{wrapper:i}=t.components||{};return i?e.jsx(i,{...t,children:e.jsx(a,{...t})}):a(t)}function r(t,i){throw new Error("Expected component `"+t+"` to be defined: you likely forgot to import, pass, or provide it.")}export{u as default,c as extractedReferences,d as frontmatter,o as structuredData,p as toc};
