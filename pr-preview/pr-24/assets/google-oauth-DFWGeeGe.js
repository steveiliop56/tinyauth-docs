import{j as e}from"./index-BDrdAJGi.js";const a="/assets/google-cloud-home-Dicdx44B.png",r="/assets/google-cloud-oauth-configure-y3TS6-09.png",h="/assets/google-cloud-oauth-home-CWM-UiKB.png",l="/assets/google-cloud-oauth-created-Cmhg9N16.png";let g={title:"Google OAuth",description:"Use Google's OAuth screen to authenticate to Tinyauth."},d=[{href:"https://console.cloud.google.com/"},{href:"/docs/reference/configuration"}],p={contents:[{heading:void 0,content:"Tinyauth has built-in support for Google OAuth, making it straightforward to set up."},{heading:"requirements",content:"A domain name (gTLDs required)"},{heading:"requirements",content:"A Google account"},{heading:"creating-the-google-oauth-app",content:"To begin, create an app in the Google Cloud Console. Create a new project (a default project may already exist). After creating the project, the following screen should appear:"},{heading:"creating-the-google-oauth-app",content:"From the quick access menu, click APIs & Services, then select OAuth consent screen from the sidebar. Click the Get Started button in the middle of the screen."},{heading:"creating-the-google-oauth-app",content:"type: info"},{heading:"creating-the-google-oauth-app",content:`Google has updated the OAuth section. This guide uses the new OAuth
experience. If a button appears saying "Try the new OAuth experience," click
it to match the steps in this guide.`},{heading:"creating-the-google-oauth-app",content:"After clicking the button, the following screen should appear:"},{heading:"creating-the-google-oauth-app",content:"App Name: Use Tinyauth."},{heading:"creating-the-google-oauth-app",content:"Support Email: Select the available email address."},{heading:"creating-the-google-oauth-app",content:"Audience: Choose External."},{heading:"creating-the-google-oauth-app",content:"Contact Information: Enter an email address."},{heading:"creating-the-google-oauth-app",content:"Agree to the data use policy and click Create."},{heading:"creating-the-google-oauth-app",content:"After some time, the OAuth homepage will appear:"},{heading:"creating-the-google-oauth-app",content:"Click Create OAuth Client."},{heading:"creating-the-google-oauth-app",content:"type: info"},{heading:"creating-the-google-oauth-app",content:`If a warning appears about the OAuth Consent Screen not being configured,
refresh the page a few times to proceed.`},{heading:"creating-the-google-oauth-app",content:"Application Type: Select Web Application."},{heading:"creating-the-google-oauth-app",content:"Name: Optionally rename the client (default is Web Client 1)."},{heading:"creating-the-google-oauth-app",content:"Authorized Redirect URIs: Add the domain with the /api/oauth/callback/google suffix, e.g., https://tinyauth.example.com/api/oauth/callback/google."},{heading:"creating-the-google-oauth-app",content:"Click Create. Once the application is created, the following screen will appear:"},{heading:"creating-the-google-oauth-app",content:"Click the client (e.g., Web Client 1) and copy the Client ID and Client Secret from the Additional Information section."},{heading:"configuring-tinyauth",content:"Add the following environment variables to the Tinyauth Docker container:"},{heading:"configuring-tinyauth",content:"type: warning"},{heading:"configuring-tinyauth",content:`OAuth alone does not guarantee security. By default, any GitHub account can
log in as a normal user. To restrict access, use the OAUTH_WHITELIST
environment variable to allow specific email addresses. Refer to the
configuration page for details.`},{heading:"configuring-tinyauth",content:"type: tip"},{heading:"configuring-tinyauth",content:`With OAuth enabled, the USERS or USERS_FILE environment variables can be
removed to allow login exclusively through the OAuth provider.`},{heading:"configuring-tinyauth",content:"Restart Tinyauth. Upon visiting the login screen, an additional option to log in with Google will appear."}],headings:[{id:"requirements",content:"Requirements"},{id:"creating-the-google-oauth-app",content:"Creating the Google OAuth App"},{id:"configuring-tinyauth",content:"Configuring Tinyauth"}]};const u=[{depth:2,url:"#requirements",title:e.jsx(e.Fragment,{children:"Requirements"})},{depth:2,url:"#creating-the-google-oauth-app",title:e.jsx(e.Fragment,{children:"Creating the Google OAuth App"})},{depth:2,url:"#configuring-tinyauth",title:e.jsx(e.Fragment,{children:"Configuring Tinyauth"})}];function o(n){const t={a:"a",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...n.components},{Callout:i}=t;return i||s("Callout"),e.jsxs(e.Fragment,{children:[e.jsx(t.p,{children:"Tinyauth has built-in support for Google OAuth, making it straightforward to set up."}),`
`,e.jsx(t.h2,{id:"requirements",children:"Requirements"}),`
`,e.jsxs(t.ul,{children:[`
`,e.jsx(t.li,{children:"A domain name (gTLDs required)"}),`
`,e.jsx(t.li,{children:"A Google account"}),`
`]}),`
`,e.jsx(t.h2,{id:"creating-the-google-oauth-app",children:"Creating the Google OAuth App"}),`
`,e.jsxs(t.p,{children:["To begin, create an app in the ",e.jsx(t.a,{href:"https://console.cloud.google.com/",children:"Google Cloud Console"}),". Create a new project (a default project may already exist). After creating the project, the following screen should appear:"]}),`
`,e.jsx(t.p,{children:e.jsx(t.img,{alt:"Google Cloud Console Home",src:a,placeholder:"blur"})}),`
`,e.jsxs(t.p,{children:["From the quick access menu, click ",e.jsx(t.strong,{children:"APIs & Services"}),", then select ",e.jsx(t.strong,{children:"OAuth consent screen"})," from the sidebar. Click the ",e.jsx(t.strong,{children:"Get Started"})," button in the middle of the screen."]}),`
`,e.jsx(i,{type:"info",children:e.jsx(t.p,{children:`Google has updated the OAuth section. This guide uses the new OAuth
experience. If a button appears saying "Try the new OAuth experience," click
it to match the steps in this guide.`})}),`
`,e.jsx(t.p,{children:"After clicking the button, the following screen should appear:"}),`
`,e.jsx(t.p,{children:e.jsx(t.img,{alt:"Configure OAuth Consent Screen",src:r,placeholder:"blur"})}),`
`,e.jsxs(t.ul,{children:[`
`,e.jsxs(t.li,{children:[e.jsx(t.strong,{children:"App Name"}),": Use ",e.jsx(t.code,{children:"Tinyauth"}),"."]}),`
`,e.jsxs(t.li,{children:[e.jsx(t.strong,{children:"Support Email"}),": Select the available email address."]}),`
`,e.jsxs(t.li,{children:[e.jsx(t.strong,{children:"Audience"}),": Choose ",e.jsx(t.strong,{children:"External"}),"."]}),`
`,e.jsxs(t.li,{children:[e.jsx(t.strong,{children:"Contact Information"}),": Enter an email address."]}),`
`,e.jsxs(t.li,{children:["Agree to the data use policy and click ",e.jsx(t.strong,{children:"Create"}),"."]}),`
`]}),`
`,e.jsx(t.p,{children:"After some time, the OAuth homepage will appear:"}),`
`,e.jsx(t.p,{children:e.jsx(t.img,{alt:"Google Cloud OAuth Home",src:h,placeholder:"blur"})}),`
`,e.jsxs(t.p,{children:["Click ",e.jsx(t.strong,{children:"Create OAuth Client"}),"."]}),`
`,e.jsx(i,{type:"info",children:e.jsx(t.p,{children:`If a warning appears about the OAuth Consent Screen not being configured,
refresh the page a few times to proceed.`})}),`
`,e.jsxs(t.ul,{children:[`
`,e.jsxs(t.li,{children:[e.jsx(t.strong,{children:"Application Type"}),": Select ",e.jsx(t.strong,{children:"Web Application"}),"."]}),`
`,e.jsxs(t.li,{children:[e.jsx(t.strong,{children:"Name"}),": Optionally rename the client (default is ",e.jsx(t.code,{children:"Web Client 1"}),")."]}),`
`,e.jsxs(t.li,{children:[e.jsx(t.strong,{children:"Authorized Redirect URIs"}),": Add the domain with the ",e.jsx(t.code,{children:"/api/oauth/callback/google"})," suffix, e.g., ",e.jsx(t.code,{children:"https://tinyauth.example.com/api/oauth/callback/google"}),"."]}),`
`]}),`
`,e.jsxs(t.p,{children:["Click ",e.jsx(t.strong,{children:"Create"}),". Once the application is created, the following screen will appear:"]}),`
`,e.jsx(t.p,{children:e.jsx(t.img,{alt:"Google Cloud OAuth Clients",src:l,placeholder:"blur"})}),`
`,e.jsxs(t.p,{children:["Click the client (e.g., ",e.jsx(t.code,{children:"Web Client 1"}),") and copy the Client ID and Client Secret from the Additional Information section."]}),`
`,e.jsx(t.h2,{id:"configuring-tinyauth",children:"Configuring Tinyauth"}),`
`,e.jsx(t.p,{children:"Add the following environment variables to the Tinyauth Docker container:"}),`
`,e.jsx(e.Fragment,{children:e.jsx(t.pre,{className:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabIndex:"0",icon:'<svg viewBox="0 0 24 24"><path d="M 6,1 C 4.354992,1 3,2.354992 3,4 v 16 c 0,1.645008 1.354992,3 3,3 h 12 c 1.645008,0 3,-1.354992 3,-3 V 8 7 A 1.0001,1.0001 0 0 0 20.707031,6.2929687 l -5,-5 A 1.0001,1.0001 0 0 0 15,1 h -1 z m 0,2 h 7 v 3 c 0,1.645008 1.354992,3 3,3 h 3 v 11 c 0,0.564129 -0.435871,1 -1,1 H 6 C 5.4358712,21 5,20.564129 5,20 V 4 C 5,3.4358712 5.4358712,3 6,3 Z M 15,3.4140625 18.585937,7 H 16 C 15.435871,7 15,6.5641288 15,6 Z" fill="currentColor" /></svg>',children:e.jsxs(t.code,{children:[e.jsxs(t.span,{className:"line",children:[e.jsx(t.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"services"}),e.jsx(t.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),`
`,e.jsxs(t.span,{className:"line",children:[e.jsx(t.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"  tinyauth"}),e.jsx(t.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),`
`,e.jsxs(t.span,{className:"line",children:[e.jsx(t.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"    environment"}),e.jsx(t.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),`
`,e.jsxs(t.span,{className:"line",children:[e.jsx(t.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"      - "}),e.jsx(t.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"PROVIDERS_GOOGLE_CLIENT_ID=your-google-client-id"})]}),`
`,e.jsxs(t.span,{className:"line",children:[e.jsx(t.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"      - "}),e.jsx(t.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"PROVIDERS_GOOGLE_CLIENT_SECRET=your-google-secret"})]})]})})}),`
`,e.jsx(i,{type:"warning",children:e.jsxs(t.p,{children:[`OAuth alone does not guarantee security. By default, any GitHub account can
log in as a normal user. To restrict access, use the `,e.jsx(t.code,{children:"OAUTH_WHITELIST"}),`
environment variable to allow specific email addresses. Refer to the
`,e.jsx(t.a,{href:"/docs/reference/configuration",children:"configuration"})," page for details."]})}),`
`,e.jsx(i,{type:"tip",children:e.jsxs(t.p,{children:["With OAuth enabled, the ",e.jsx(t.code,{children:"USERS"})," or ",e.jsx(t.code,{children:"USERS_FILE"}),` environment variables can be
removed to allow login exclusively through the OAuth provider.`]})}),`
`,e.jsx(t.p,{children:"Restart Tinyauth. Upon visiting the login screen, an additional option to log in with Google will appear."})]})}function x(n={}){const{wrapper:t}=n.components||{};return t?e.jsx(t,{...n,children:e.jsx(o,{...n})}):o(n)}function s(n,t){throw new Error("Expected component `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}export{x as default,d as extractedReferences,g as frontmatter,p as structuredData,u as toc};
