import{j as e}from"./index-BDrdAJGi.js";let l={title:"Access controls",description:"Tinyauth has support for docker label-based access controls."},c=[{href:"https://github.com/Tecnativa/docker-socket-proxy"}],r={contents:[{heading:void 0,content:"Tinyauth supports basic access controls with Docker labels. These labels can restrict or allow access to applications."},{heading:"modifying-the-tinyauth-container",content:"To enable access controls, add the following volume to the Tinyauth container:"},{heading:"modifying-the-tinyauth-container",content:"Restart Tinyauth after setting the volume."},{heading:"modifying-the-tinyauth-container",content:"type: tip"},{heading:"modifying-the-tinyauth-container",content:"For increased security, use a Docker socket proxy like Tecnativa's. Configure Tinyauth to use the proxy by adding the following environment variable:"},{heading:"modifying-the-tinyauth-container",content:"Ensure Tinyauth can reach the Docker socket proxy container."},{heading:"label-structure",content:"Access control labels follow this structure:"},{heading:"label-structure",content:"Where [app] is the name of the app to protect. This app ID must be unique for each protected app."},{heading:"label-discovery",content:"Tinyauth uses the app ID in labels and the request subdomain to match labels with the app. For example, a request to app1.example.com triggers Tinyauth to search for containers with the tinyauth.apps.app1.foo: bar label. To use the domain instead, add the following label:"},{heading:"label-discovery",content:"Tinyauth will now use the domain to match labels instead of the app ID."},{heading:"user-acls",content:"To restrict access to specific users, use the users.allow label:"},{heading:"user-acls",content:"Only user1 will be able to access the app. To block specific users, use the users.block label:"},{heading:"user-acls",content:"type: tip"},{heading:"user-acls",content:`Both users.allow and users.block labels can accept a comma-separated list
of users or a regex string (enclosed with /).`},{heading:"user-acls",content:"type: info"},{heading:"oauth-whitelist",content:"To restrict access to specific OAuth users, use the oauth.whitelist label:"},{heading:"oauth-whitelist",content:"Only user1@example.com will be able to access the app."},{heading:"oauth-whitelist",content:"type: tip"},{heading:"oauth-whitelist",content:`The oauth.whitelist label can accept a comma-separated list of users or a
regex string (enclosed with /).`},{heading:"path-acls",content:"To skip authentication for specific paths, use the path.allow label:"},{heading:"path-acls",content:"To block access to specific paths, use the path.block label:"},{heading:"path-acls",content:"type: warning"},{heading:"path-acls",content:`Path labels use regex strings. For example, ^\\/api matches paths starting
with /api, while ^\\/ping$ matches the exact path /ping.`},{heading:"ip-based-access-controls",content:"To allow access based on IP addresses or CIDRs, use the ip.allow label:"},{heading:"ip-based-access-controls",content:"To block specific IPs or subnets, use the ip.block label:"},{heading:"bypassing-authentication-for-ips",content:"To disable authentication for specific IPs or subnets, use the ip.bypass label:"},{heading:"access-controls-using-oidc-groups",content:"Some OIDC servers, like Pocket ID, support user groups in the OIDC response. To use groups, ensure the groups scope is included in the OAuth provider configuration. Then, add the oauth.groups label:"},{heading:"access-controls-using-oidc-groups",content:"Only users in the admin group will be allowed to access the app."},{heading:"access-controls-using-oidc-groups",content:"type: warning"},{heading:"access-controls-using-oidc-groups",content:`The oauth.groups label is only supported for custom OAuth providers, not for
Google or GitHub.`}],headings:[{id:"modifying-the-tinyauth-container",content:"Modifying the Tinyauth Container"},{id:"label-structure",content:"Label Structure"},{id:"label-discovery",content:"Label Discovery"},{id:"user-acls",content:"User ACLs"},{id:"oauth-whitelist",content:"OAuth Whitelist"},{id:"path-acls",content:"Path ACLs"},{id:"ip-based-access-controls",content:"IP-Based Access Controls"},{id:"bypassing-authentication-for-ips",content:"Bypassing Authentication for IPs"},{id:"access-controls-using-oidc-groups",content:"Access Controls Using OIDC Groups"}]};const o=[{depth:2,url:"#modifying-the-tinyauth-container",title:e.jsx(e.Fragment,{children:"Modifying the Tinyauth Container"})},{depth:2,url:"#label-structure",title:e.jsx(e.Fragment,{children:"Label Structure"})},{depth:2,url:"#label-discovery",title:e.jsx(e.Fragment,{children:"Label Discovery"})},{depth:2,url:"#user-acls",title:e.jsx(e.Fragment,{children:"User ACLs"})},{depth:2,url:"#oauth-whitelist",title:e.jsx(e.Fragment,{children:"OAuth Whitelist"})},{depth:2,url:"#path-acls",title:e.jsx(e.Fragment,{children:"Path ACLs"})},{depth:2,url:"#ip-based-access-controls",title:e.jsx(e.Fragment,{children:"IP-Based Access Controls"})},{depth:2,url:"#bypassing-authentication-for-ips",title:e.jsx(e.Fragment,{children:"Bypassing Authentication for IPs"})},{depth:2,url:"#access-controls-using-oidc-groups",title:e.jsx(e.Fragment,{children:"Access Controls Using OIDC Groups"})}];function h(i){const s={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",span:"span",...i.components},{Callout:t}=s;return t||n("Callout"),e.jsxs(e.Fragment,{children:[e.jsx(s.p,{children:"Tinyauth supports basic access controls with Docker labels. These labels can restrict or allow access to applications."}),`
`,e.jsx(s.h2,{id:"modifying-the-tinyauth-container",children:"Modifying the Tinyauth Container"}),`
`,e.jsx(s.p,{children:"To enable access controls, add the following volume to the Tinyauth container:"}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabIndex:"0",icon:'<svg viewBox="0 0 24 24"><path d="M 6,1 C 4.354992,1 3,2.354992 3,4 v 16 c 0,1.645008 1.354992,3 3,3 h 12 c 1.645008,0 3,-1.354992 3,-3 V 8 7 A 1.0001,1.0001 0 0 0 20.707031,6.2929687 l -5,-5 A 1.0001,1.0001 0 0 0 15,1 h -1 z m 0,2 h 7 v 3 c 0,1.645008 1.354992,3 3,3 h 3 v 11 c 0,0.564129 -0.435871,1 -1,1 H 6 C 5.4358712,21 5,20.564129 5,20 V 4 C 5,3.4358712 5.4358712,3 6,3 Z M 15,3.4140625 18.585937,7 H 16 C 15.435871,7 15,6.5641288 15,6 Z" fill="currentColor" /></svg>',children:e.jsxs(s.code,{children:[e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"services"}),e.jsx(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"  tinyauth"}),e.jsx(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"    volumes"}),e.jsx(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"      - "}),e.jsx(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"/var/run/docker.sock:/var/run/docker.sock"})]})]})})}),`
`,e.jsx(s.p,{children:"Restart Tinyauth after setting the volume."}),`
`,e.jsxs(t,{type:"tip",children:[e.jsxs(s.p,{children:["For increased security, use a Docker socket proxy like ",e.jsx(s.a,{href:"https://github.com/Tecnativa/docker-socket-proxy",children:"Tecnativa's"}),". Configure Tinyauth to use the proxy by adding the following environment variable:"]}),e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabIndex:"0",icon:'<svg viewBox="0 0 24 24"><path d="M 6,1 C 4.354992,1 3,2.354992 3,4 v 16 c 0,1.645008 1.354992,3 3,3 h 12 c 1.645008,0 3,-1.354992 3,-3 V 8 7 A 1.0001,1.0001 0 0 0 20.707031,6.2929687 l -5,-5 A 1.0001,1.0001 0 0 0 15,1 h -1 z m 0,2 h 7 v 3 c 0,1.645008 1.354992,3 3,3 h 3 v 11 c 0,0.564129 -0.435871,1 -1,1 H 6 C 5.4358712,21 5,20.564129 5,20 V 4 C 5,3.4358712 5.4358712,3 6,3 Z M 15,3.4140625 18.585937,7 H 16 C 15.435871,7 15,6.5641288 15,6 Z" fill="currentColor" /></svg>',children:e.jsxs(s.code,{children:[e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"services"}),e.jsx(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"  tinyauth"}),e.jsx(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"    environment"}),e.jsx(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"      DOCKER_HOST"}),e.jsx(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),e.jsx(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"tcp://docker-socket-proxy:2375"})]})]})})}),e.jsx(s.p,{children:"Ensure Tinyauth can reach the Docker socket proxy container."})]}),`
`,e.jsx(s.h2,{id:"label-structure",children:"Label Structure"}),`
`,e.jsx(s.p,{children:"Access control labels follow this structure:"}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabIndex:"0",icon:'<svg viewBox="0 0 24 24"><path d="M 6,1 C 4.354992,1 3,2.354992 3,4 v 16 c 0,1.645008 1.354992,3 3,3 h 12 c 1.645008,0 3,-1.354992 3,-3 V 8 7 A 1.0001,1.0001 0 0 0 20.707031,6.2929687 l -5,-5 A 1.0001,1.0001 0 0 0 15,1 h -1 z m 0,2 h 7 v 3 c 0,1.645008 1.354992,3 3,3 h 3 v 11 c 0,0.564129 -0.435871,1 -1,1 H 6 C 5.4358712,21 5,20.564129 5,20 V 4 C 5,3.4358712 5.4358712,3 6,3 Z M 15,3.4140625 18.585937,7 H 16 C 15.435871,7 15,6.5641288 15,6 Z" fill="currentColor" /></svg>',children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"tinyauth.apps.[app].[key]"}),e.jsx(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": ["}),e.jsx(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"value"}),e.jsx(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"]"})]})})})}),`
`,e.jsxs(s.p,{children:["Where ",e.jsx(s.code,{children:"[app]"})," is the name of the app to protect. This app ID must be unique for each protected app."]}),`
`,e.jsx(s.h2,{id:"label-discovery",children:"Label Discovery"}),`
`,e.jsxs(s.p,{children:["Tinyauth uses the app ID in labels and the request subdomain to match labels with the app. For example, a request to ",e.jsx(s.code,{children:"app1.example.com"})," triggers Tinyauth to search for containers with the ",e.jsx(s.code,{children:"tinyauth.apps.app1.foo: bar"})," label. To use the domain instead, add the following label:"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabIndex:"0",icon:'<svg viewBox="0 0 24 24"><path d="M 6,1 C 4.354992,1 3,2.354992 3,4 v 16 c 0,1.645008 1.354992,3 3,3 h 12 c 1.645008,0 3,-1.354992 3,-3 V 8 7 A 1.0001,1.0001 0 0 0 20.707031,6.2929687 l -5,-5 A 1.0001,1.0001 0 0 0 15,1 h -1 z m 0,2 h 7 v 3 c 0,1.645008 1.354992,3 3,3 h 3 v 11 c 0,0.564129 -0.435871,1 -1,1 H 6 C 5.4358712,21 5,20.564129 5,20 V 4 C 5,3.4358712 5.4358712,3 6,3 Z M 15,3.4140625 18.585937,7 H 16 C 15.435871,7 15,6.5641288 15,6 Z" fill="currentColor" /></svg>',children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"tinyauth.apps.myapp.domain"}),e.jsx(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),e.jsx(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"myapp.example.com"})]})})})}),`
`,e.jsx(s.p,{children:"Tinyauth will now use the domain to match labels instead of the app ID."}),`
`,e.jsx(s.h2,{id:"user-acls",children:"User ACLs"}),`
`,e.jsxs(s.p,{children:["To restrict access to specific users, use the ",e.jsx(s.code,{children:"users.allow"})," label:"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabIndex:"0",icon:'<svg viewBox="0 0 24 24"><path d="M 6,1 C 4.354992,1 3,2.354992 3,4 v 16 c 0,1.645008 1.354992,3 3,3 h 12 c 1.645008,0 3,-1.354992 3,-3 V 8 7 A 1.0001,1.0001 0 0 0 20.707031,6.2929687 l -5,-5 A 1.0001,1.0001 0 0 0 15,1 h -1 z m 0,2 h 7 v 3 c 0,1.645008 1.354992,3 3,3 h 3 v 11 c 0,0.564129 -0.435871,1 -1,1 H 6 C 5.4358712,21 5,20.564129 5,20 V 4 C 5,3.4358712 5.4358712,3 6,3 Z M 15,3.4140625 18.585937,7 H 16 C 15.435871,7 15,6.5641288 15,6 Z" fill="currentColor" /></svg>',children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"tinyauth.apps.myapp.users.allow"}),e.jsx(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),e.jsx(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"user1"})]})})})}),`
`,e.jsxs(s.p,{children:["Only ",e.jsx(s.code,{children:"user1"})," will be able to access the app. To block specific users, use the ",e.jsx(s.code,{children:"users.block"})," label:"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabIndex:"0",icon:'<svg viewBox="0 0 24 24"><path d="M 6,1 C 4.354992,1 3,2.354992 3,4 v 16 c 0,1.645008 1.354992,3 3,3 h 12 c 1.645008,0 3,-1.354992 3,-3 V 8 7 A 1.0001,1.0001 0 0 0 20.707031,6.2929687 l -5,-5 A 1.0001,1.0001 0 0 0 15,1 h -1 z m 0,2 h 7 v 3 c 0,1.645008 1.354992,3 3,3 h 3 v 11 c 0,0.564129 -0.435871,1 -1,1 H 6 C 5.4358712,21 5,20.564129 5,20 V 4 C 5,3.4358712 5.4358712,3 6,3 Z M 15,3.4140625 18.585937,7 H 16 C 15.435871,7 15,6.5641288 15,6 Z" fill="currentColor" /></svg>',children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"tinyauth.apps.myapp.users.block"}),e.jsx(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),e.jsx(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"user2"})]})})})}),`
`,e.jsx(t,{type:"tip",children:e.jsxs(s.p,{children:["Both ",e.jsx(s.code,{children:"users.allow"})," and ",e.jsx(s.code,{children:"users.block"}),` labels can accept a comma-separated list
of users or a regex string (enclosed with `,e.jsx(s.code,{children:"/"}),")."]})}),`
`,e.jsx(t,{type:"info",children:"These labels also apply to LDAP users."}),`
`,e.jsx(s.h2,{id:"oauth-whitelist",children:"OAuth Whitelist"}),`
`,e.jsxs(s.p,{children:["To restrict access to specific OAuth users, use the ",e.jsx(s.code,{children:"oauth.whitelist"})," label:"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabIndex:"0",icon:'<svg viewBox="0 0 24 24"><path d="M 6,1 C 4.354992,1 3,2.354992 3,4 v 16 c 0,1.645008 1.354992,3 3,3 h 12 c 1.645008,0 3,-1.354992 3,-3 V 8 7 A 1.0001,1.0001 0 0 0 20.707031,6.2929687 l -5,-5 A 1.0001,1.0001 0 0 0 15,1 h -1 z m 0,2 h 7 v 3 c 0,1.645008 1.354992,3 3,3 h 3 v 11 c 0,0.564129 -0.435871,1 -1,1 H 6 C 5.4358712,21 5,20.564129 5,20 V 4 C 5,3.4358712 5.4358712,3 6,3 Z M 15,3.4140625 18.585937,7 H 16 C 15.435871,7 15,6.5641288 15,6 Z" fill="currentColor" /></svg>',children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"tinyauth.apps.myapp.oauth.whitelist"}),e.jsx(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),e.jsx(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"user1@example.com"})]})})})}),`
`,e.jsxs(s.p,{children:["Only ",e.jsx(s.code,{children:"user1@example.com"})," will be able to access the app."]}),`
`,e.jsx(t,{type:"tip",children:e.jsxs(s.p,{children:["The ",e.jsx(s.code,{children:"oauth.whitelist"}),` label can accept a comma-separated list of users or a
regex string (enclosed with `,e.jsx(s.code,{children:"/"}),")."]})}),`
`,e.jsx(s.h2,{id:"path-acls",children:"Path ACLs"}),`
`,e.jsxs(s.p,{children:["To skip authentication for specific paths, use the ",e.jsx(s.code,{children:"path.allow"})," label:"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabIndex:"0",icon:'<svg viewBox="0 0 24 24"><path d="M 6,1 C 4.354992,1 3,2.354992 3,4 v 16 c 0,1.645008 1.354992,3 3,3 h 12 c 1.645008,0 3,-1.354992 3,-3 V 8 7 A 1.0001,1.0001 0 0 0 20.707031,6.2929687 l -5,-5 A 1.0001,1.0001 0 0 0 15,1 h -1 z m 0,2 h 7 v 3 c 0,1.645008 1.354992,3 3,3 h 3 v 11 c 0,0.564129 -0.435871,1 -1,1 H 6 C 5.4358712,21 5,20.564129 5,20 V 4 C 5,3.4358712 5.4358712,3 6,3 Z M 15,3.4140625 18.585937,7 H 16 C 15.435871,7 15,6.5641288 15,6 Z" fill="currentColor" /></svg>',children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"tinyauth.apps.myapp.path.allow"}),e.jsx(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),e.jsx(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"^\\/api"})]})})})}),`
`,e.jsxs(s.p,{children:["To block access to specific paths, use the ",e.jsx(s.code,{children:"path.block"})," label:"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabIndex:"0",icon:'<svg viewBox="0 0 24 24"><path d="M 6,1 C 4.354992,1 3,2.354992 3,4 v 16 c 0,1.645008 1.354992,3 3,3 h 12 c 1.645008,0 3,-1.354992 3,-3 V 8 7 A 1.0001,1.0001 0 0 0 20.707031,6.2929687 l -5,-5 A 1.0001,1.0001 0 0 0 15,1 h -1 z m 0,2 h 7 v 3 c 0,1.645008 1.354992,3 3,3 h 3 v 11 c 0,0.564129 -0.435871,1 -1,1 H 6 C 5.4358712,21 5,20.564129 5,20 V 4 C 5,3.4358712 5.4358712,3 6,3 Z M 15,3.4140625 18.585937,7 H 16 C 15.435871,7 15,6.5641288 15,6 Z" fill="currentColor" /></svg>',children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"tinyauth.apps.myapp.path.block"}),e.jsx(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),e.jsx(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"^\\/admin"})]})})})}),`
`,e.jsx(t,{type:"warning",children:e.jsxs(s.p,{children:["Path labels use regex strings. For example, ",e.jsx(s.code,{children:"^\\/api"}),` matches paths starting
with `,e.jsx(s.code,{children:"/api"}),", while ",e.jsx(s.code,{children:"^\\/ping$"})," matches the exact path ",e.jsx(s.code,{children:"/ping"}),"."]})}),`
`,e.jsx(s.h2,{id:"ip-based-access-controls",children:"IP-Based Access Controls"}),`
`,e.jsxs(s.p,{children:["To allow access based on IP addresses or CIDRs, use the ",e.jsx(s.code,{children:"ip.allow"})," label:"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabIndex:"0",icon:'<svg viewBox="0 0 24 24"><path d="M 6,1 C 4.354992,1 3,2.354992 3,4 v 16 c 0,1.645008 1.354992,3 3,3 h 12 c 1.645008,0 3,-1.354992 3,-3 V 8 7 A 1.0001,1.0001 0 0 0 20.707031,6.2929687 l -5,-5 A 1.0001,1.0001 0 0 0 15,1 h -1 z m 0,2 h 7 v 3 c 0,1.645008 1.354992,3 3,3 h 3 v 11 c 0,0.564129 -0.435871,1 -1,1 H 6 C 5.4358712,21 5,20.564129 5,20 V 4 C 5,3.4358712 5.4358712,3 6,3 Z M 15,3.4140625 18.585937,7 H 16 C 15.435871,7 15,6.5641288 15,6 Z" fill="currentColor" /></svg>',children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"tinyauth.apps.myapp.ip.allow"}),e.jsx(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),e.jsx(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"10.10.5.5,10.10.10.0/24"})]})})})}),`
`,e.jsxs(s.p,{children:["To block specific IPs or subnets, use the ",e.jsx(s.code,{children:"ip.block"})," label:"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabIndex:"0",icon:'<svg viewBox="0 0 24 24"><path d="M 6,1 C 4.354992,1 3,2.354992 3,4 v 16 c 0,1.645008 1.354992,3 3,3 h 12 c 1.645008,0 3,-1.354992 3,-3 V 8 7 A 1.0001,1.0001 0 0 0 20.707031,6.2929687 l -5,-5 A 1.0001,1.0001 0 0 0 15,1 h -1 z m 0,2 h 7 v 3 c 0,1.645008 1.354992,3 3,3 h 3 v 11 c 0,0.564129 -0.435871,1 -1,1 H 6 C 5.4358712,21 5,20.564129 5,20 V 4 C 5,3.4358712 5.4358712,3 6,3 Z M 15,3.4140625 18.585937,7 H 16 C 15.435871,7 15,6.5641288 15,6 Z" fill="currentColor" /></svg>',children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"tinyauth.apps.myapp.ip.block"}),e.jsx(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),e.jsx(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"192.168.1.1,192.168.0.0/16"})]})})})}),`
`,e.jsx(s.h2,{id:"bypassing-authentication-for-ips",children:"Bypassing Authentication for IPs"}),`
`,e.jsxs(s.p,{children:["To disable authentication for specific IPs or subnets, use the ",e.jsx(s.code,{children:"ip.bypass"})," label:"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabIndex:"0",icon:'<svg viewBox="0 0 24 24"><path d="M 6,1 C 4.354992,1 3,2.354992 3,4 v 16 c 0,1.645008 1.354992,3 3,3 h 12 c 1.645008,0 3,-1.354992 3,-3 V 8 7 A 1.0001,1.0001 0 0 0 20.707031,6.2929687 l -5,-5 A 1.0001,1.0001 0 0 0 15,1 h -1 z m 0,2 h 7 v 3 c 0,1.645008 1.354992,3 3,3 h 3 v 11 c 0,0.564129 -0.435871,1 -1,1 H 6 C 5.4358712,21 5,20.564129 5,20 V 4 C 5,3.4358712 5.4358712,3 6,3 Z M 15,3.4140625 18.585937,7 H 16 C 15.435871,7 15,6.5641288 15,6 Z" fill="currentColor" /></svg>',children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"tinyauth.apps.myapp.ip.bypass"}),e.jsx(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),e.jsx(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"10.10.5.5,10.10.10.0/24"})]})})})}),`
`,e.jsx(s.h2,{id:"access-controls-using-oidc-groups",children:"Access Controls Using OIDC Groups"}),`
`,e.jsxs(s.p,{children:["Some OIDC servers, like Pocket ID, support user groups in the OIDC response. To use groups, ensure the ",e.jsx(s.code,{children:"groups"})," scope is included in the OAuth provider configuration. Then, add the ",e.jsx(s.code,{children:"oauth.groups"})," label:"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabIndex:"0",icon:'<svg viewBox="0 0 24 24"><path d="M 6,1 C 4.354992,1 3,2.354992 3,4 v 16 c 0,1.645008 1.354992,3 3,3 h 12 c 1.645008,0 3,-1.354992 3,-3 V 8 7 A 1.0001,1.0001 0 0 0 20.707031,6.2929687 l -5,-5 A 1.0001,1.0001 0 0 0 15,1 h -1 z m 0,2 h 7 v 3 c 0,1.645008 1.354992,3 3,3 h 3 v 11 c 0,0.564129 -0.435871,1 -1,1 H 6 C 5.4358712,21 5,20.564129 5,20 V 4 C 5,3.4358712 5.4358712,3 6,3 Z M 15,3.4140625 18.585937,7 H 16 C 15.435871,7 15,6.5641288 15,6 Z" fill="currentColor" /></svg>',children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"tinyauth.apps.myapp.oauth.groups"}),e.jsx(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),e.jsx(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"admin"})]})})})}),`
`,e.jsxs(s.p,{children:["Only users in the ",e.jsx(s.code,{children:"admin"})," group will be allowed to access the app."]}),`
`,e.jsx(t,{type:"warning",children:e.jsxs(s.p,{children:["The ",e.jsx(s.code,{children:"oauth.groups"}),` label is only supported for custom OAuth providers, not for
Google or GitHub.`]})})]})}function d(i={}){const{wrapper:s}=i.components||{};return s?e.jsx(s,{...i,children:e.jsx(h,{...i})}):h(i)}function n(i,s){throw new Error("Expected component `"+i+"` to be defined: you likely forgot to import, pass, or provide it.")}export{d as default,c as extractedReferences,l as frontmatter,r as structuredData,o as toc};
